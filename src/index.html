<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Services Concept Map</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            overflow: hidden;
        }
        
        #canvas {
            width: 100vw;
            height: 100vh;
            cursor: grab;
        }
        
        #canvas:active {
            cursor: grabbing;
        }
        
        .node {
            position: absolute;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            border: 2px solid transparent;
            font-size: 13px;
            font-weight: 600;
            text-align: center;
            min-width: 120px;
        }
        
        .node:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.4);
        }
        
        .node.selected {
            border-color: #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        /* Category colors */
        .compute { background: linear-gradient(135deg, #FF9900, #FF6600); }
        .storage { background: linear-gradient(135deg, #569A31, #3E7B1F); }
        .database { background: linear-gradient(135deg, #2E5C8A, #1A3A5C); }
        .networking { background: linear-gradient(135deg, #8B5CF6, #6D28D9); }
        .security { background: linear-gradient(135deg, #DC2626, #991B1B); }
        .management { background: linear-gradient(135deg, #0891B2, #0E7490); }
        .cost { background: linear-gradient(135deg, #F59E0B, #D97706); }
        .messaging { background: linear-gradient(135deg, #EC4899, #BE185D); }
        .cdn { background: linear-gradient(135deg, #14B8A6, #0D9488); }
        
        .connection {
            position: absolute;
            height: 2px;
            background: rgba(139, 92, 246, 0.3);
            transform-origin: 0 50%;
            pointer-events: none;
            z-index: -1;
        }
        
        .info-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(26, 26, 46, 0.95);
            border: 2px solid #8B5CF6;
            border-radius: 12px;
            padding: 20px;
            max-width: 350px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            display: none;
        }
        
        .info-panel.visible {
            display: block;
        }
        
        .info-panel h2 {
            color: #8B5CF6;
            margin-bottom: 10px;
            font-size: 20px;
        }
        
        .info-panel .category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .info-panel p {
            line-height: 1.6;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .info-panel .key-points {
            margin-top: 15px;
        }
        
        .info-panel .key-points h3 {
            font-size: 14px;
            color: #8B5CF6;
            margin-bottom: 8px;
        }
        
        .info-panel ul {
            padding-left: 20px;
            font-size: 13px;
            line-height: 1.6;
        }
        
        .info-panel li {
            margin-bottom: 6px;
        }
        
        .legend {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(26, 26, 46, 0.95);
            border: 2px solid #8B5CF6;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }
        
        .legend h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #8B5CF6;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 6px;
            font-size: 12px;
        }
        
        .legend-color {
            width: 30px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
        }
        
        .controls {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(26, 26, 46, 0.95);
            border: 2px solid #8B5CF6;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }
        
        .controls h3 {
            font-size: 14px;
            margin-bottom: 10px;
            color: #8B5CF6;
        }
        
        .controls button {
            background: #8B5CF6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-right: 8px;
            margin-bottom: 8px;
            transition: background 0.2s;
        }
        
        .controls button:hover {
            background: #7C3AED;
        }
    </style>
</head>
<body>
    <div id="canvas"></div>
    
    <div class="info-panel" id="infoPanel"></div>
    
    <div class="controls">
        <h3>üó∫Ô∏è AWS Cloud Practitioner Map</h3>
        <button onclick="resetView()">Reset View</button>
        <button onclick="focusNetworking()">Focus Security/Network</button>
    </div>
    
    <div class="legend">
        <h3>Service Categories</h3>
        <div class="legend-item">
            <div class="legend-color compute"></div>
            <span>Compute</span>
        </div>
        <div class="legend-item">
            <div class="legend-color storage"></div>
            <span>Storage</span>
        </div>
        <div class="legend-item">
            <div class="legend-color database"></div>
            <span>Database</span>
        </div>
        <div class="legend-item">
            <div class="legend-color networking"></div>
            <span>Networking</span>
        </div>
        <div class="legend-item">
            <div class="legend-color security"></div>
            <span>Security</span>
        </div>
        <div class="legend-item">
            <div class="legend-color management"></div>
            <span>Management</span>
        </div>
        <div class="legend-item">
            <div class="legend-color cost"></div>
            <span>Cost Management</span>
        </div>
        <div class="legend-item">
            <div class="legend-color messaging"></div>
            <span>Messaging</span>
        </div>
        <div class="legend-item">
            <div class="legend-color cdn"></div>
            <span>CDN/DNS</span>
        </div>
    </div>

    <script>
        const services = {
            // Core Compute
            ec2: {
                name: 'EC2',
                category: 'compute',
                description: 'Elastic Compute Cloud - Virtual servers in the cloud',
                details: 'EC2 provides resizable compute capacity. You can launch instances with different instance types, operating systems, and configurations.',
                keyPoints: [
                    'Pay for what you use (on-demand, reserved, spot)',
                    'Multiple instance types for different workloads',
                    'Lives inside a VPC and subnet',
                    'Protected by Security Groups (stateful firewall)',
                    'Can have public or private IP addresses'
                ],
                x: 400, y: 350
            },
            lambda: {
                name: 'Lambda',
                category: 'compute',
                description: 'Serverless compute - Run code without managing servers',
                details: 'AWS Lambda lets you run code without provisioning servers. You only pay for compute time consumed.',
                keyPoints: [
                    'No server management required',
                    'Automatic scaling',
                    'Pay per request and compute time',
                    'Can be triggered by many AWS services',
                    'Max 15 minute execution time'
                ],
                x: 650, y: 350
            },
            ecs: {
                name: 'ECS',
                category: 'compute',
                description: 'Elastic Container Service - Run Docker containers',
                details: 'ECS is a container orchestration service that supports Docker containers.',
                keyPoints: [
                    'Run containers on EC2 or Fargate',
                    'Integrates with VPC networking',
                    'Protected by Security Groups',
                    'Good for microservices'
                ],
                x: 500, y: 250
            },
            ecr: {
                name: 'ECR',
                category: 'storage',
                description: 'Elastic Container Registry - Docker image repository',
                details: 'ECR is a fully managed Docker container registry for storing and managing container images.',
                keyPoints: [
                    'Store, manage, and deploy Docker images',
                    'Integrated with ECS and EKS',
                    'Encrypted at rest and in transit',
                    'Pay for storage and data transfer',
                    'IAM-based access control'
                ],
                x: 700, y: 250
            },
            fargate: {
                name: 'Fargate',
                category: 'compute',
                description: 'Serverless compute for containers',
                details: 'Fargate is a serverless compute engine for containers (ECS/EKS) - no EC2 management needed.',
                keyPoints: [
                    'No server management required',
                    'Pay only for resources used',
                    'Works with ECS and EKS',
                    'AWS manages infrastructure',
                    'Good for apps with variable load'
                ],
                x: 600, y: 150
            },
            beanstalk: {
                name: 'Elastic Beanstalk',
                category: 'compute',
                description: 'Platform as a Service - Deploy apps easily',
                details: 'Elastic Beanstalk is a PaaS for deploying web applications without managing infrastructure.',
                keyPoints: [
                    'Just upload your code (Java, .NET, PHP, Node.js, Python, etc.)',
                    'AWS handles capacity, load balancing, scaling, monitoring',
                    'You retain full control if needed',
                    'Free (pay only for underlying resources)',
                    'Good for developers who want to focus on code'
                ],
                x: 800, y: 250
            },
            autoscaling: {
                name: 'Auto Scaling',
                category: 'compute',
                description: 'Automatically adjust capacity based on demand',
                details: 'Auto Scaling automatically adds or removes EC2 instances based on conditions you define.',
                keyPoints: [
                    'Scale out (add) or scale in (remove) instances',
                    'Based on CloudWatch metrics or schedules',
                    'Maintains application availability',
                    'Works with ELB for health checks',
                    'No additional charge (pay for EC2)'
                ],
                x: 250, y: 250
            },
            elb: {
                name: 'ELB',
                category: 'networking',
                description: 'Elastic Load Balancer - Distribute traffic',
                details: 'ELB distributes incoming traffic across multiple targets (EC2, containers, IPs).',
                keyPoints: [
                    'Three types: ALB (HTTP/HTTPS), NLB (TCP/UDP), GLB (Gateway)',
                    'ALB: Layer 7, routes based on content',
                    'NLB: Layer 4, ultra-high performance',
                    'Automatic health checks',
                    'Works across multiple AZs',
                    'Integrates with Auto Scaling'
                ],
                x: 250, y: 350
            },
            
            // Storage
            s3: {
                name: 'S3',
                category: 'storage',
                description: 'Simple Storage Service - Object storage',
                details: 'S3 stores data as objects in buckets. Highly durable and available.',
                keyPoints: [
                    '99.999999999% (11 9s) durability',
                    'Unlimited storage capacity',
                    'Different storage classes for cost optimization',
                    'Bucket policies control access',
                    'Can enable versioning and encryption'
                ],
                x: 950, y: 450
            },
            ebs: {
                name: 'EBS',
                category: 'storage',
                description: 'Elastic Block Store - Block storage for EC2',
                details: 'EBS provides persistent block storage volumes for EC2 instances.',
                keyPoints: [
                    'Attached to EC2 instances',
                    'Automatically replicated in AZ',
                    'Can create snapshots to S3',
                    'Different volume types (SSD, HDD)'
                ],
                x: 350, y: 500
            },
            efs: {
                name: 'EFS',
                category: 'storage',
                description: 'Elastic File System - Shared file storage',
                details: 'EFS provides scalable file storage that can be shared across multiple EC2 instances.',
                keyPoints: [
                    'Shared file system (NFS protocol)',
                    'Can be mounted by multiple EC2 instances',
                    'Automatically scales up/down',
                    'Pay for what you use',
                    'Works across multiple AZs'
                ],
                x: 500, y: 500
            },
            glacier: {
                name: 'Glacier',
                category: 'storage',
                description: 'S3 Glacier - Long-term archival storage',
                details: 'Glacier (S3 storage class) is designed for data archiving with very low cost.',
                keyPoints: [
                    'Extremely low cost storage',
                    'For data accessed rarely (archives)',
                    'Retrieval times: minutes to hours',
                    'Three tiers: Instant, Flexible, Deep Archive',
                    'Deep Archive cheapest (~$1/TB/month)'
                ],
                x: 1100, y: 450
            },
            
            // Database
            rds: {
                name: 'RDS/Aurora',
                category: 'database',
                description: 'Relational Database Service - Managed SQL databases',
                details: 'RDS manages relational databases (MySQL, PostgreSQL, etc.). Aurora is AWS\'s high-performance relational database.',
                keyPoints: [
                    'Automated backups and patching',
                    'Multi-AZ for high availability',
                    'Aurora is 5x faster than MySQL',
                    'Lives in private subnets (typically)',
                    'Protected by Security Groups'
                ],
                x: 700, y: 550
            },
            dynamodb: {
                name: 'DynamoDB',
                category: 'database',
                description: 'NoSQL database - Key-value and document database',
                details: 'Fully managed NoSQL database with single-digit millisecond performance.',
                keyPoints: [
                    'Serverless with auto-scaling',
                    'Single-digit millisecond latency',
                    'No VPC required (public service)',
                    'Can enable encryption at rest',
                    'Good for gaming, IoT, mobile apps'
                ],
                x: 900, y: 550
            },
            
            // Networking - IMPORTANT FOR YOU!
            vpc: {
                name: 'VPC',
                category: 'networking',
                description: 'Virtual Private Cloud - Your private network in AWS',
                details: 'VPC is your isolated network in AWS. All EC2, RDS, and many other services run inside a VPC.',
                keyPoints: [
                    'Logically isolated network',
                    'Define IP address range (CIDR block)',
                    'Contains subnets (public & private)',
                    'One VPC per region (can have multiple)',
                    'Foundation for network security'
                ],
                x: 400, y: 50
            },
            subnet: {
                name: 'Subnet',
                category: 'networking',
                description: 'Subdivisions of your VPC',
                details: 'Subnets divide your VPC into smaller networks, typically across Availability Zones.',
                keyPoints: [
                    'Public subnets: route to Internet Gateway',
                    'Private subnets: no direct internet route',
                    'Each subnet in one Availability Zone',
                    'Resources launch into subnets',
                    'Protected by Network ACLs'
                ],
                x: 250, y: 150
            },
            igw: {
                name: 'Internet Gateway',
                category: 'networking',
                description: 'Allows VPC resources to access the internet',
                details: 'Internet Gateway enables communication between VPC and the internet.',
                keyPoints: [
                    'Attached to VPC (one per VPC)',
                    'Used by public subnets',
                    'Horizontally scaled and highly available',
                    'No bandwidth constraints'
                ],
                x: 100, y: 50
            },
            
            // Security - EXTRA IMPORTANT FOR YOU!
            securitygroup: {
                name: 'Security Groups',
                category: 'security',
                description: 'Stateful firewall for EC2, RDS, etc.',
                details: 'Security Groups act as virtual firewalls controlling inbound and outbound traffic.',
                keyPoints: [
                    'STATEFUL: return traffic automatically allowed',
                    'Operates at instance level',
                    'Allow rules only (no deny rules)',
                    'All inbound denied by default',
                    'All outbound allowed by default',
                    'Can reference other security groups'
                ],
                x: 150, y: 400
            },
            nacl: {
                name: 'Network ACL',
                category: 'security',
                description: 'Stateless firewall at subnet level',
                details: 'Network ACLs are stateless firewalls that control traffic in and out of subnets.',
                keyPoints: [
                    'STATELESS: must allow return traffic explicitly',
                    'Operates at subnet level',
                    'Has allow AND deny rules',
                    'Rules processed in number order',
                    'Default NACL allows all traffic',
                    'Custom NACLs deny all by default'
                ],
                x: 50, y: 250
            },
            iam: {
                name: 'IAM',
                category: 'security',
                description: 'Identity and Access Management',
                details: 'IAM controls who can do what in your AWS account.',
                keyPoints: [
                    'Users, Groups, Roles, Policies',
                    'Not for application authentication',
                    'Global service (not region-specific)',
                    'Principle of least privilege',
                    'MFA for enhanced security'
                ],
                x: 800, y: 50
            },
            kms: {
                name: 'KMS',
                category: 'security',
                description: 'Key Management Service - Encryption key management',
                details: 'KMS creates and manages encryption keys for AWS services and applications.',
                keyPoints: [
                    'Create and manage encryption keys',
                    'Integrates with most AWS services',
                    'Customer or AWS managed keys',
                    'Automatic key rotation available',
                    'Audit key usage with CloudTrail'
                ],
                x: 950, y: 50
            },
            
            // Management & Monitoring
            cloudwatch: {
                name: 'CloudWatch',
                category: 'management',
                description: 'Monitoring and observability service',
                details: 'CloudWatch collects metrics, logs, and events from AWS resources.',
                keyPoints: [
                    'Metrics from AWS services',
                    'Create alarms and dashboards',
                    'Collect and analyze logs',
                    'Set up automated actions'
                ],
                x: 950, y: 250
            },
            cloudtrail: {
                name: 'CloudTrail',
                category: 'management',
                description: 'Audit logging - Track API calls and user activity',
                details: 'CloudTrail records AWS API calls and related events for your account.',
                keyPoints: [
                    'Logs WHO did WHAT and WHEN',
                    'Tracks API calls across AWS services',
                    'Essential for compliance and auditing',
                    'Stores logs in S3',
                    'Can integrate with CloudWatch',
                    'Enabled by default (90 day history)'
                ],
                x: 1050, y: 450
            },
            config: {
                name: 'AWS Config',
                category: 'management',
                description: 'Track resource configuration changes',
                details: 'AWS Config continuously monitors and records AWS resource configurations.',
                keyPoints: [
                    'Records configuration changes over time',
                    'Assess compliance with policies',
                    'Different from CloudTrail (tracks configs vs API calls)',
                    'Can trigger SNS notifications',
                    'Useful for auditing and troubleshooting'
                ],
                x: 950, y: 350
            },
            cloudformation: {
                name: 'CloudFormation',
                category: 'management',
                description: 'Infrastructure as Code',
                details: 'CloudFormation lets you model and provision AWS resources using templates.',
                keyPoints: [
                    'Define infrastructure as code (JSON/YAML)',
                    'Version control your infrastructure',
                    'Repeatable deployments',
                    'No additional charge (pay for resources)'
                ],
                x: 1200, y: 250
            },
            systemsmanager: {
                name: 'Systems Manager',
                category: 'management',
                description: 'Manage EC2 and on-premises at scale',
                details: 'Systems Manager provides operational insights and automates management tasks.',
                keyPoints: [
                    'Patch and update EC2 instances',
                    'Run commands across instances',
                    'Store configuration data (Parameter Store)',
                    'Session Manager for secure shell access',
                    'No additional charge for core features'
                ],
                x: 1050, y: 350
            },
            trustedadvisor: {
                name: 'Trusted Advisor',
                category: 'management',
                description: 'Best practice recommendations',
                details: 'Trusted Advisor inspects your AWS environment and provides recommendations.',
                keyPoints: [
                    '5 categories: Cost, Performance, Security, Fault Tolerance, Service Limits',
                    'Basic checks free, full checks with Business/Enterprise support',
                    'Real-time guidance',
                    'Can trigger CloudWatch alarms',
                    'Helps optimize AWS environment'
                ],
                x: 1200, y: 150
            },
            organizations: {
                name: 'AWS Organizations',
                category: 'management',
                description: 'Centrally manage multiple AWS accounts',
                details: 'Organizations helps you manage and govern multiple AWS accounts centrally.',
                keyPoints: [
                    'Consolidated billing across accounts',
                    'Group accounts into OUs (Organizational Units)',
                    'Apply policies across accounts (SCPs)',
                    'Automate account creation',
                    'Volume discounts across all accounts'
                ],
                x: 1350, y: 250
            },
            
            // Cost Management
            costexplorer: {
                name: 'Cost Explorer',
                category: 'cost',
                description: 'Visualize and analyze AWS costs',
                details: 'Cost Explorer helps you visualize, understand, and manage AWS costs and usage over time.',
                keyPoints: [
                    'View costs and usage over time',
                    'Identify trends and cost drivers',
                    'Forecast future costs',
                    'Create custom reports',
                    'Free to use (no additional charge)'
                ],
                x: 1350, y: 400
            },
            budgets: {
                name: 'AWS Budgets',
                category: 'cost',
                description: 'Set custom cost and usage budgets',
                details: 'AWS Budgets lets you set custom budgets and receive alerts when costs or usage exceed thresholds.',
                keyPoints: [
                    'Set cost and usage budgets',
                    'Get alerts via email or SNS',
                    'Track against budget',
                    'First 2 budgets free',
                    'Can trigger automated actions'
                ],
                x: 1350, y: 500
            },
            
            // Messaging
            sqs: {
                name: 'SQS',
                category: 'messaging',
                description: 'Simple Queue Service - Message queue',
                details: 'SQS is a fully managed message queuing service for decoupling application components.',
                keyPoints: [
                    'Asynchronous message processing',
                    'Standard (best-effort ordering) or FIFO (guaranteed order)',
                    'Messages retained up to 14 days',
                    'Pull-based (consumers poll for messages)',
                    'Scales automatically'
                ],
                x: 800, y: 400
            },
            sns: {
                name: 'SNS',
                category: 'messaging',
                description: 'Simple Notification Service - Pub/Sub messaging',
                details: 'SNS is a pub/sub messaging service for sending notifications to subscribers.',
                keyPoints: [
                    'Push-based notifications',
                    'One message to many subscribers',
                    'Supports email, SMS, HTTP, Lambda, SQS',
                    'Topic-based publish/subscribe',
                    'Real-time message delivery'
                ],
                x: 800, y: 150
            },
            
            // CDN and DNS
            cloudfront: {
                name: 'CloudFront',
                category: 'cdn',
                description: 'Content Delivery Network (CDN)',
                details: 'CloudFront is a CDN that delivers content with low latency using edge locations worldwide.',
                keyPoints: [
                    '450+ edge locations globally',
                    'Caches content closer to users',
                    'Works with S3, EC2, ELB, or custom origins',
                    'Integrates with AWS Shield for DDoS protection',
                    'Can serve both static and dynamic content'
                ],
                x: 1100, y: 650
            },
            route53: {
                name: 'Route 53',
                category: 'cdn',
                description: 'DNS service and domain registration',
                details: 'Route 53 is a scalable DNS web service that routes users to applications.',
                keyPoints: [
                    'Domain name registration',
                    'DNS routing (simple, weighted, latency, failover, geolocation)',
                    'Health checks and monitoring',
                    '100% uptime SLA',
                    'Integrates with other AWS services'
                ],
                x: 50, y: 500
            }
        };

        const connections = [
            ['vpc', 'subnet'],
            ['vpc', 'igw'],
            ['subnet', 'ec2'],
            ['subnet', 'nacl'],
            ['ec2', 'securitygroup'],
            ['ec2', 'ebs'],
            ['ec2', 'efs'],
            ['ec2', 'iam'],
            ['ec2', 'autoscaling'],
            ['ec2', 'elb'],
            ['autoscaling', 'elb'],
            ['autoscaling', 'cloudwatch'],
            ['rds', 'securitygroup'],
            ['rds', 'subnet'],
            ['ecs', 'ec2'],
            ['ecs', 'ecr'],
            ['ecs', 'fargate'],
            ['ecs', 'vpc'],
            ['fargate', 'ecr'],
            ['beanstalk', 'ec2'],
            ['beanstalk', 'elb'],
            ['lambda', 's3'],
            ['lambda', 'dynamodb'],
            ['lambda', 'sqs'],
            ['lambda', 'sns'],
            ['lambda', 'iam'],
            ['s3', 'glacier'],
            ['s3', 'kms'],
            ['ebs', 'kms'],
            ['cloudwatch', 'ec2'],
            ['cloudwatch', 'lambda'],
            ['cloudwatch', 'autoscaling'],
            ['cloudwatch', 'sns'],
            ['cloudtrail', 's3'],
            ['cloudtrail', 'cloudwatch'],
            ['config', 's3'],
            ['config', 'sns'],
            ['cloudformation', 'vpc'],
            ['systemsmanager', 'ec2'],
            ['sqs', 'sns'],
            ['s3', 'cloudfront'],
            ['elb', 'cloudfront'],
            ['route53', 'cloudfront'],
            ['route53', 'elb'],
            ['iam', 'kms']
        ];

        let scale = 1;
        let translateX = 0;
        let translateY = 0;
        let isDragging = false;
        let startX, startY;
        let selectedNode = null;

        const canvas = document.getElementById('canvas');
        const infoPanel = document.getElementById('infoPanel');

        // Create nodes
        Object.keys(services).forEach(key => {
            const service = services[key];
            const node = document.createElement('div');
            node.className = `node ${service.category}`;
            node.textContent = service.name;
            node.style.left = service.x + 'px';
            node.style.top = service.y + 'px';
            node.dataset.service = key;
            
            node.addEventListener('click', (e) => {
                e.stopPropagation();
                showInfo(key);
            });
            
            canvas.appendChild(node);
        });

        // Create connections
        connections.forEach(([from, to]) => {
            const fromNode = document.querySelector(`[data-service="${from}"]`);
            const toNode = document.querySelector(`[data-service="${to}"]`);
            
            const line = document.createElement('div');
            line.className = 'connection';
            updateLine(line, fromNode, toNode);
            canvas.appendChild(line);
        });

        function updateLine(line, fromNode, toNode) {
            const fromRect = fromNode.getBoundingClientRect();
            const toRect = toNode.getBoundingClientRect();
            
            const x1 = fromRect.left + fromRect.width / 2;
            const y1 = fromRect.top + fromRect.height / 2;
            const x2 = toRect.left + toRect.width / 2;
            const y2 = toRect.top + toRect.height / 2;
            
            const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            const angle = Math.atan2(y2 - y1, x2 - x1) * 180 / Math.PI;
            
            line.style.width = length + 'px';
            line.style.left = x1 + 'px';
            line.style.top = y1 + 'px';
            line.style.transform = `rotate(${angle}deg)`;
        }

        function showInfo(serviceKey) {
            const service = services[serviceKey];
            
            // Remove previous selection
            document.querySelectorAll('.node').forEach(n => n.classList.remove('selected'));
            document.querySelector(`[data-service="${serviceKey}"]`).classList.add('selected');
            
            selectedNode = serviceKey;
            
            let html = `
                <h2>${service.name}</h2>
                <div class="category ${service.category}">${service.category.toUpperCase()}</div>
                <p><strong>${service.description}</strong></p>
                <p>${service.details}</p>
            `;
            
            if (service.keyPoints && service.keyPoints.length > 0) {
                html += `
                    <div class="key-points">
                        <h3>Key Points for Exam:</h3>
                        <ul>
                            ${service.keyPoints.map(point => `<li>${point}</li>`).join('')}
                        </ul>
                    </div>
                `;
            }
            
            infoPanel.innerHTML = html;
            infoPanel.classList.add('visible');
        }

        // Pan functionality
        canvas.addEventListener('mousedown', (e) => {
            if (e.target === canvas) {
                isDragging = true;
                startX = e.clientX - translateX;
                startY = e.clientY - translateY;
            }
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                translateX = e.clientX - startX;
                translateY = e.clientY - startY;
                updateTransform();
            }
        });

        canvas.addEventListener('mouseup', () => {
            isDragging = false;
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            const delta = e.deltaY > 0 ? 0.9 : 1.1;
            scale *= delta;
            scale = Math.max(0.5, Math.min(2, scale));
            updateTransform();
        });

        function updateTransform() {
            const nodes = document.querySelectorAll('.node');
            nodes.forEach(node => {
                node.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
            });
            
            // Update connection lines after transform
            const lines = document.querySelectorAll('.connection');
            lines.forEach((line, index) => {
                const [fromKey, toKey] = connections[index];
                const fromNode = document.querySelector(`[data-service="${fromKey}"]`);
                const toNode = document.querySelector(`[data-service="${toKey}"]`);
                if (fromNode && toNode) {
                    updateLine(line, fromNode, toNode);
                }
            });
        }

        function resetView() {
            scale = 1;
            translateX = 0;
            translateY = 0;
            updateTransform();
        }

        function focusNetworking() {
            // Reset first
            resetView();
            
            // Focus on networking/security area
            translateX = 200;
            translateY = 100;
            scale = 1.3;
            updateTransform();
            
            // Show VPC info
            showInfo('vpc');
        }

        // Click outside to close info panel
        canvas.addEventListener('click', (e) => {
            if (e.target === canvas) {
                infoPanel.classList.remove('visible');
                document.querySelectorAll('.node').forEach(n => n.classList.remove('selected'));
            }
        });
    </script>
</body>
</html>
