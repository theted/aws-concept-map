## Setup project structure and dependencies

- Created package.json with Vite, TypeScript, and Vitest dependencies
- Created tsconfig.json with strict TypeScript settings for ES2020 bundler mode
- Created vite.config.ts with build and dev server configuration
- Restructured project:
  - index.html moved to root (Vite convention)
  - src/main.ts as the TypeScript entry point
  - src/style.css extracted from POC
  - src/types.ts with Service and Connection type definitions
  - src/data/services.ts with typed service and connection data
- Added src/data/services.test.ts with Vitest tests for data integrity
- Updated .gitignore to include dist/
- All tests passing (7 tests)
- Build produces production-ready output in dist/

## Initial implementation of network visualization using canvas element

- Created src/canvas/CanvasRenderer.ts - a modular canvas rendering class that handles:
  - Drawing AWS service nodes with category-specific gradient colors
  - Drawing connection lines between related services
  - Mouse-based pan (drag) and zoom (wheel) navigation
  - Zoom towards mouse position for intuitive zooming
  - Hit detection for clicking on service nodes
  - Hover state detection with cursor changes
  - Selection state highlighting
  - HiDPI/Retina display support via devicePixelRatio
- Updated src/main.ts to use CanvasRenderer instead of DOM-based rendering
- Updated index.html to use a canvas element instead of a div
- Simplified src/style.css by removing DOM node/connection styles (now drawn on canvas)
- Added comprehensive tests in src/canvas/CanvasRenderer.test.ts:
  - Tests for initialization and state management
  - Tests for view reset and focus on service
  - Tests for render method (context calls verification)
  - Tests for service click callbacks
  - Tests for error handling (null context)
- Added happy-dom as dev dependency for DOM testing environment
- Updated vite.config.ts with happy-dom test environment
- All tests passing (24 tests: 7 data + 17 canvas)

## Ensure canvas navigation works as expected

- Fixed drag/click conflict by tracking total drag distance and using a 5px threshold to distinguish clicks from drags
- Added touch event support for mobile devices:
  - Single-finger pan (drag to move the view)
  - Two-finger pinch-to-zoom with zoom toward pinch center
  - Tap-to-select services on touch devices
- Added keyboard navigation for accessibility:
  - Arrow keys for panning (50px per keypress)
  - +/- keys for zooming in/out
  - 0 key to reset view (center on content)
  - Escape key to deselect current service
  - Canvas is now focusable (tabindex="0")
- Added automatic view centering on content:
  - Initial view centers and scales to fit all services with padding
  - Reset view now centers on content instead of returning to (0,0)
  - New public `centerViewOnContent()` method calculates bounding box and fits view
- Updated tests in src/canvas/CanvasRenderer.test.ts:
  - Added tests for touch event listener setup
  - Added tests for keyboard event listener setup
  - Added tests for keyboard navigation (all arrow keys, zoom keys, reset, escape)
  - Added tests for centerViewOnContent behavior
  - Updated existing tests to account for auto-centered initial state
- All tests passing (36 tests: 7 data + 29 canvas)

## Add support for showing detailed descriptions of services when clicked

- Created src/ui/InfoPanel.ts - a modular info panel component that handles:
  - Displaying service details (name, category, description, details, key points)
  - Close button with proper event handling
  - XSS protection via HTML escaping for all user-provided content
  - Show/hide functionality with CSS class toggling
  - Callback support for close events
- Updated src/main.ts to use the new InfoPanel class:
  - Refactored from inline DOM manipulation to modular component
  - Integrated close callback with canvas renderer for proper state sync
- Enhanced src/style.css with close button styling:
  - Positioned absolutely in top-right corner
  - Hover effects with color transitions
  - Proper padding on h2 to avoid overlap
- Added comprehensive tests in src/ui/InfoPanel.test.ts:
  - Tests for initialization and visibility state
  - Tests for show/hide functionality
  - Tests for service content rendering (name, category, description, details, key points)
  - Tests for close button behavior and callback
  - Tests for XSS protection (HTML escaping verification)
  - Tests for service switching
- All tests passing (56 tests: 7 data + 29 canvas + 20 info panel)

## Move content to JSON files

- Created src/data/services.json containing all AWS service data:
  - 34 services with name, category, description, details, keyPoints, and x/y coordinates
  - Structured for easy editing by non-developers
- Created src/data/connections.json containing all service relationships:
  - 45 connections as [from, to] tuples
  - Maintains the same graph structure as before
- Refactored src/data/services.ts to import from JSON files:
  - Uses Vite's native JSON import support
  - Type assertions ensure proper TypeScript types (ServiceMap, Connection[])
  - Clean separation of content (JSON) from code (TypeScript)
- All existing tests continue to pass (56 tests) verifying data integrity

## Add content for additional services

- Expanded services.json from 34 to 55 AWS services (+21 new services)
- Added new "devtools" category for CI/CD services with blue gradient color
- New services added with full descriptions and key points:
  - Compute/Serverless: API Gateway, Step Functions, EKS
  - Security: Cognito, Secrets Manager, WAF, Shield, GuardDuty, Inspector
  - DevTools: CodePipeline, CodeBuild, CodeDeploy
  - Database: ElastiCache, Redshift, Athena
  - Messaging: EventBridge, Kinesis
  - Networking: NAT Gateway, Direct Connect, VPN Gateway
  - Management: X-Ray
  - Storage: Storage Gateway, Snow Family
- Expanded connections.json from 45 to 106 connections (+61 new connections)
- All services include certification-relevant key points for:
  - AWS Cloud Practitioner
  - AWS Solutions Architect Associate
  - AWS Developer Associate
- Updated src/types.ts to include new 'devtools' category
- Updated src/canvas/CanvasRenderer.ts with devtools category color
- Updated src/data/services.test.ts to validate new category
- All tests passing (56 tests)

## Add extra description for each service with Learn More button

- Updated src/types.ts with new optional fields:
  - Added Resource interface with title and url properties
  - Added extendedDescription (optional string) to Service interface
  - Added resources (optional Resource[]) to Service interface
- Updated src/data/services.json with extended content for 7 key services:
  - EC2, Lambda, S3, VPC, IAM, RDS, DynamoDB
  - Each includes detailed extendedDescription with certification-relevant information
  - Each includes 3 resource links (Documentation, Best Practices/Pricing/Features)
- Enhanced src/ui/InfoPanel.ts with Learn More functionality:
  - Added isExpanded state to track toggle state
  - Added isExtendedContentVisible() public method for testing
  - Added toggleExpanded() public method to toggle state
  - Added hasExtendedContent() private method to check for extended content
  - Updated render() to show "Learn more" / "Show less" button when extended content exists
  - Extended content section shows extendedDescription and resources when expanded
  - Resources rendered as links with target="_blank" and rel="noopener noreferrer"
  - Button has aria-expanded attribute for accessibility
  - All content properly escaped for XSS protection
- Updated src/style.css with styles for the new elements:
  - .learn-more-btn with gradient background and hover effects
  - .extended-content container with top border separator
  - .extended-description section styling
  - .resources section with styled links and external link indicator (â†—)
- Added comprehensive tests in src/ui/InfoPanel.test.ts:
  - Tests for Learn More button visibility based on extended content
  - Tests for expand/collapse toggle behavior
  - Tests for aria-expanded accessibility attribute
  - Tests for extended description rendering
  - Tests for resources links rendering with correct attributes
  - Tests for showing only description or only resources
  - Tests for state reset when switching services or hiding panel
  - Tests for XSS protection in extended content
- All tests passing (73 tests: 7 data + 29 canvas + 37 info panel)

## Prepare CI/CD pipeline for deployment to AWS Lambda

- Created Lambda handler in lambda/handler.ts:
  - Serves static files from compiled Vite output in /dist directory
  - Supports all common MIME types (HTML, CSS, JS, JSON, images, fonts)
  - Binary files (PNG, JPG, WOFF, etc.) served as base64-encoded responses
  - Directory traversal attack prevention by sanitizing paths
  - SPA routing support: falls back to index.html for non-file routes
  - Smart cache headers: no-cache for HTML, immutable for static assets
  - Error handling with 404 and 500 responses
  - Compatible with AWS Lambda Function URLs and API Gateway HTTP API
- Created lambda/tsconfig.json for Lambda-specific TypeScript compilation
- Created Dockerfile for AWS Lambda container:
  - Multi-stage build: Node.js Alpine for building, AWS Lambda Node.js 20 for runtime
  - First stage: installs dependencies, builds static site with Vite, compiles Lambda handler
  - Second stage: copies built assets and handler into Lambda runtime environment
  - Handler entry point: handler.handler
- Created .github/workflows/ci.yml for continuous integration:
  - Runs on push to main/master and pull requests
  - TypeScript type checking
  - Vitest test execution
  - Application build verification
  - Docker image build verification
- Created .github/workflows/deploy.yml for continuous deployment:
  - Runs on push to main/master with manual trigger option
  - Configurable via GitHub variables: AWS_REGION, ECR_REPOSITORY, LAMBDA_FUNCTION_NAME
  - Uses GitHub secrets for AWS credentials: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY
  - Builds and pushes Docker image to Amazon ECR (tagged with git SHA and latest)
  - Updates Lambda function with new container image
  - Waits for Lambda update to complete before finishing
- Created .env.example with documentation for required environment variables
- Updated package.json with new scripts:
  - build:lambda - compiles Lambda handler
  - build:all - builds both static site and Lambda handler
  - docker:build - builds Docker image locally
  - docker:run - runs Docker container locally on port 9000
- Added @types/aws-lambda dev dependency for TypeScript type support
- Updated .gitignore to include lambda-dist/ output directory
- Added comprehensive tests in lambda/handler.test.ts:
  - Tests for serving index.html at root path
  - Tests for MIME type detection (CSS, JS, PNG, SVG)
  - Tests for directory traversal attack prevention
  - Tests for 404 handling and SPA fallback
  - Tests for binary file base64 encoding
  - Tests for cache header configuration
  - Tests for error handling (500 responses)
- All tests passing (84 tests: 7 data + 29 canvas + 37 info panel + 11 lambda handler)

## Revise and polish design

- Added missing devtools category to legend in index.html
- Introduced CSS custom properties (variables) in :root for consistent theming:
  - Color palette: --color-primary, --color-primary-light, --color-primary-dark
  - UI tokens: --color-bg-dark, --color-text, --color-text-muted
  - Spacing/effects: --border-radius, --shadow, --shadow-hover
  - Timing: --transition-fast (0.15s), --transition-normal (0.25s)
- Added glassmorphism effect to all panels with backdrop-filter: blur(12px)
- Improved info panel:
  - Smooth slide-in animation using opacity, visibility, and transform
  - Custom scrollbar styling for Webkit browsers (purple-tinted)
  - Better visual hierarchy with improved typography and spacing
  - Close button redesigned with subtle border and scale animations
  - Category badges with rounded pill design and uppercase text
  - Description/details now have distinct styles for better readability
  - Key points section with colored bullet markers
  - Extended content section with fade-in animation
- Improved controls panel:
  - Buttons use translucent background with subtle border
  - Hover states include transform and color transitions
  - Active states provide tactile feedback
- Improved legend panel:
  - Hover states on legend items for interactivity
  - Legend color swatches have subtle shadow
- Added responsive design improvements:
  - Mobile breakpoint (768px): Info panel slides up from bottom
  - Small screens (480px): Legend hidden to save space
  - Adjusted padding, font sizes, and spacing for touch devices
- Added focus-visible states for keyboard accessibility on all interactive elements
- Updated body font stack to include system fonts for cross-platform consistency
- Added devtools category color (.devtools gradient class)
- All tests continue to pass (84 tests)

## Prepare deployment documentation

- Created comprehensive DEPLOYMENT.md covering:
  - Architecture overview with diagram
  - Prerequisites and required AWS permissions (IAM policy)
  - AWS infrastructure setup instructions:
    - ECR repository creation
    - Lambda function creation with execution role
    - Function URL configuration with CORS
  - GitHub Actions configuration:
    - Required secrets (AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
    - Optional variables (AWS_REGION, ECR_REPOSITORY, LAMBDA_FUNCTION_NAME)
  - Local development commands (dev server, tests, builds)
  - Local Docker testing with curl examples
  - Manual deployment steps (without GitHub Actions)
  - Troubleshooting section for common issues:
    - Container startup failures
    - Function URL 500 errors
    - ECR push failures
    - Deployment workflow failures
  - Estimated AWS costs (< $1/month for low-traffic)
- Updated PRD.md marking deployment documentation as complete

## Revise graph layout - non-overlapping nodes with category grouping

- Created src/layout/LayoutEngine.ts - a layout algorithm that:
  - Groups services by category (compute, storage, database, networking, security, etc.)
  - Arranges categories in a 4-column grid pattern with configurable spacing
  - Places services within each category in a grid to prevent overlaps
  - Configurable via LayoutConfig: nodeWidth, nodeHeight, nodePadding, categoryPadding, categoryColumns
  - Provides nodesOverlap() method for collision detection between two nodes
  - Provides validateNoOverlaps() method to verify entire layout has no collisions
  - Computes layout bounds (minX, maxX, minY, maxY) for view centering
- Updated src/main.ts to apply layout algorithm on initialization:
  - LayoutEngine.computeLayout() called before creating CanvasRenderer
  - Services receive new x/y coordinates that guarantee no overlaps
  - Original service data (name, description, keyPoints, etc.) preserved
- Added comprehensive tests in src/layout/LayoutEngine.test.ts:
  - Tests for constructor and custom configuration
  - Tests for computeLayout with empty, single, and multiple services
  - Tests for service property preservation
  - Tests for category grouping behavior
  - Tests for bounds calculation
  - Tests for nodesOverlap collision detection (overlapping, distant, touching edges)
  - Tests for validateNoOverlaps validation method
  - Tests for layout with 10+ services in same category
  - Tests for layout with services across 5 different categories
  - Tests for layout with real production services data (55 services)
  - Tests for layout consistency (deterministic results)
  - Tests for custom node dimensions
- All tests passing (104 tests: 7 data + 29 canvas + 37 info panel + 11 lambda + 20 layout)

## Add detailed descriptions for all services

- Expanded extendedDescription and resources from 7 services to all 57 services
- Added 2 new services to the catalog (expanded from 55 to 57 total)
- Each service now includes:
  - extendedDescription: comprehensive, certification-relevant technical details (150-300 words)
  - resources: 3 curated links (Documentation, Best Practices/Features, Pricing/Comparison)
- Content coverage includes:
  - Compute: EC2, Lambda, ECS, ECR, Fargate, Beanstalk, Auto Scaling, API Gateway, Step Functions, EKS
  - Storage: S3, EBS, EFS, Glacier, Storage Gateway, Snow Family
  - Database: RDS/Aurora, DynamoDB, ElastiCache, Redshift, Athena
  - Networking: VPC, Subnet, Internet Gateway, NAT Gateway, ELB, Direct Connect, VPN Gateway
  - Security: Security Groups, NACLs, IAM, KMS, Cognito, Secrets Manager, WAF, Shield, GuardDuty, Inspector
  - Management: CloudWatch, CloudTrail, Config, CloudFormation, Systems Manager, Trusted Advisor, Organizations, X-Ray
  - Messaging: SQS, SNS, EventBridge, Kinesis
  - CDN: CloudFront, Route 53
  - Cost: Cost Explorer, Budgets
  - DevTools: CodePipeline, CodeBuild, CodeDeploy
- Each extendedDescription covers:
  - Key concepts and terminology
  - Configuration options and modes
  - Integration patterns with other AWS services
  - Best practices and common use cases
  - Pricing model highlights
  - Certification exam relevance
- Gotchas discovered:
  - Resource links should use target="_blank" with rel="noopener noreferrer" for security (already implemented in InfoPanel.ts)
  - Extended descriptions should balance depth with readability - too long makes the UI feel cluttered
  - Consistent terminology across services helps users build mental connections
- All tests continue to pass (104 tests)

## Ensure smooth animations, especially when zooming in/out

- Enhanced src/canvas/CanvasRenderer.ts with animation system:
  - Added animation state properties: targetState, animationStartState, animationStartTime, animationDuration, animationFrameId
  - Implemented easeOutCubic() easing function for smooth deceleration (ease-out cubic: 1 - (1-t)^3)
  - Added animateTo() method to start smooth transitions to target state with configurable duration
  - Added animationLoop() using requestAnimationFrame for 60fps smooth interpolation
  - Added cancelAnimation() to interrupt animations (e.g., when user starts dragging)
  - Added public isAnimating() method to check animation state
- Applied smooth animations to zoom operations:
  - handleWheel() now animates zoom with 120ms duration for responsive wheel zoom
  - zoomAtCenter() (keyboard +/-) now animates with 150ms duration
  - centerViewOnContent() now animates with 400ms duration (optional animate=false parameter for initial load)
  - focusOnService() now animates with 400ms duration (optional animate=false parameter)
- User interactions properly interrupt animations:
  - handleMouseDown() cancels animation when drag starts
  - handleTouchStart() cancels animation when touch starts
  - Wheel events during animation accumulate zoom (reads from targetState if animating)
- Updated tests in src/canvas/CanvasRenderer.test.ts:
  - Added manual requestAnimationFrame mock (setupRAFMock) for reliable animation testing
  - Created flushAnimationFrames() helper to advance mock time and execute RAF callbacks
  - Created advanceMockTime() helper for partial animation testing
  - Added 7 new animation-specific tests:
    - Tests for isAnimating() state reporting
    - Tests for animation cancellation on drag
    - Tests for state interpolation during animation
    - Tests for ease-out easing behavior
    - Tests for zoom accumulation during animation
  - Updated existing tests to use animation helpers and animate=false parameter where appropriate
- Gotchas discovered:
  - Vitest's vi.useFakeTimers() doesn't reliably mock requestAnimationFrame in happy-dom environment
  - Manual RAF mocking with custom callback queue provides more predictable test behavior
  - performance.now() must also be mocked for animation timing to work correctly in tests
  - Wheel zoom needs to read from targetState (if animating) to accumulate rapid scroll events
  - Initial view setup should skip animation (animate=false) to avoid jarring load experience
- All tests pass (111 tests: 7 data + 36 canvas + 37 info panel + 11 lambda + 20 layout)
